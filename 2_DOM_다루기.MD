# 20190211_DOM_다루기  

## DOM이란 무엇인가
문서 객체 모델 (Document Object Model)은 HTML과 XML 문서의 내용을 조작하고 나타내는 기반 API이다. 브라우저는 웹 문서를 로드한 후 파싱하여 DOM을 생성한다. 

텍스트 파일로 이루어진 웹 문서를 브라우저가 이해할 수 있는 구조로 메모리에 적재하는 것을 DOM이라 하며 자바스크립트를 통해 동적으로 변경할 수 있고 렌더링에 반영된다. 

웹 문서의 동적 변경을 위해 DOM은 프로그래밍 언어가 DOM에 접근하고 수정할 수 있는 방법을 제공하며, 자바스크립트 객체의 형태로 제공된다. 이것을 DOM API이라 부른다.

결국, DOM은 **HTML 문서에 대한 모델 구성**과 **HTML 문서 내의 각 요소에 접근/수정**의 기능을 한다.
- HTML 문서에 대한 모델 구성
브라우저는 HTML 문서를 로드한 후 모델을 메모리에 생성한다. 이 모델은 객체의 트리로 구성되며 DOM tree라고 한다.
- HTML 각 요소에 접근/수정
DOM은 모델 내의 객체에 접근할 수 있기에 DOM이 수정되면 웹 문서 또한 변경된다.

### DOM tree
생성된 모델은 객체의 트리로 구조화되어 있기 때문에 DOM tree라고 부른다.
```
DOM tree 구성노드

- 문서 노드
트리의 최상위에 존재하며 다른 하위 노드에 접근하기 위해서는 문서 노드를 거쳐야한다.
- 요소 노드
HTML 요소를 뜻하며 중첩에 의해 부자 관계를 갖는다. 즉, 문서의 구조를 서술하는 노드이다.
- 어트리뷰트 노드
HTML 요소의 어트리뷰트를 표현한 것이다. 해당 요소 노드를 찾아 접근하면 어트리뷰트를 참조, 수정할 수 있다.
- 텍스트 노드
HTML 요소의 텍스트를 표현한다. 요소 노드의 자식으로, 자신은 자식 노드를 가질 수 없는 DOM tree의 최종단이다.
```
## 이벤트 제어

### 이벤트 등록
이벤트 등록이란 사용자의 입력에 따라 이루어질 추가 동작을 구현하는 것으로, 웹 API을 통해 동적인 기능을 추가할 수 있다.

### 이벤트 버블링 (Event Bubbling)
이벤트 버블링이란 이벤트가 발생했을 때 상위 요소들로 전달되어 가는 특성이다. 즉, 하위 요소에서 상위 요소로의 이벤트 전파 방식을 말한다.

### 이벤트 캡쳐 (Event Capture)
이벤트 캡쳐는 이벤트 버블링과 반대 방향으로 진행되는 방식이다. 특정 이벤트 발생 시 최상위 요소에서 해당 태그를 찾아 내려간다.

### 이벤트 위임 (Event Delegation)
이벤트 위임은 상위 요소에서 하위 요소의 이벤트를 제어하는 방식이다. 상위 요소에서 이벤트 리스너를 추가해 하위에서 발생한 이벤트를 감지하는 것은 이벤트 버블링으로, 이런식으로 이벤트를 제어한다.

## DOM 조작

### 순회 (Traversal)
```
firstChild, lastChild
- 자식 노드를 탐색하며 HTMLElement를 상속받은 객체를 반환

hasChildNodes()
- 자식 노드가 있는지 확인해 boolean 값 반환

childNodes
- 자식노드의 컬렉션을 반환하며 non-live임

children()
- 자식노드의 컬렌션을 반환하며 live임

previousSibiling, nextSibling
- 형제 노드를 탐색하며 HTMLElement를 상속받은 객체를 반환
```

### 추가 (Append)
```
appendChild(Node)
- 노드를 DOM 트리에 마지막 자식 요소로 추가

createElement(tagName)
- 새 요소를 생성

createTextNode(text)
- 새 텍스트 노드를 생성

insertAdjacentHTML(position, string)
- 첫 번째 인자에 올 수 있는 값은 'beforebegin', 'afterbegin', 'beforeend', 'afterend'가 있음
- 텍스트를 HTML로 파싱하고 해당 노드를 지정 위치에 삽입
```

### 삭제 (Delete)
```
removeChild(Node)
- 노드를 DOM 트리에서 제거

removeAttribute(attribute)
- 지정한 어트리뷰트를 제거함
```

## 이벤트 핸들링 (Event Handling)

### 이벤트 핸들러/리스너
이벤트 발생 전에는 실행되지 않다가 이벤트가 발생하게 되면 실행되는 함수를 이벤트 핸들러라 하며 이벤트에 대응하는 처리를 기술한다.

이벤트 리스너는 해당 객체 또는 요소에 등록되어야 호출될 수 있으며, 해당 요소에 프로퍼티로 등록하거나 메소드에 이벤트 리스너를 전달하는 방법이 있다.

객체나 요소에 프로퍼티로 등록하는 방법은 js 코드에서 프로퍼티로 등록하거나 html 태그에 속성으로 등록할 수 있는데, js 코드에서 프로퍼티로 등록하면 이벤트 타입별로 하나의 이벤트 리스너만 등록할 수 있다는 단점이 있고, html 태그에 속성으로 등록 시 가독성과 유지보수에 문제점을 발생시킨다.

메소드에 이벤트 리스너를 전달하는 방법은, addEventListener()과 attachEvent() 메소드를 사용할 수 있는데, addEventListener() 메소드의 원형은
```
대상객체.addEventListener(이벤트명, 실행할이벤트리스너, 이벤트전파방식)
```
이다. 이벤트 전파 방식은 false이면 버블링, true이면 캡처링 방식으로 이벤트를 전파할 수 있다.

### 이벤트 객체
이벤트를 발생시킨 요소와 발생한 이벤트에 대한 정보를 제공하는 객체이다. 이벤트 발생 시 동적으로 생성되며 이벤트 핸들러에 인자로 전달된다. 이벤트 핸들러에 이벤트 객체를 인자로 전달하지 않아도 암묵적으로 전달되지만, 이벤트 핸들러 선언 시 매개변수를 명시적으로 선언하여야한다.

