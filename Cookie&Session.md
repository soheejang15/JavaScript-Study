# 쿠키 (Cookie) & 세션 (Session)

## HTTP 프로토콜 (Hyper Text Transfer Protocol) 

**통신 프로토콜**이란 간단히 말해 통신을 위한 두 개체 간에 무엇을, 어떻게, 언제 통신할 것인지에 대해 관한 규약이다. 

**HTTP 프로토콜**은 주로 HTML 문서를 주고 받으며, 하이퍼텍스트를 기반으로 어떤 종류의 데이터든지 전송할 수 있도록 설계되어있다.  

또한 서버/클라이언트 모델을 따른다. 서버/클라이언트 모델을 간단히 설명하자면, 클라이언트 소프트웨어 (chrome, IE 등)에서 URL을 이용해 접속하여 서버에 데이터를 요청(Request)하고, 서버는 요청받은 것을 처리해 클라이언트에 다시 응답(Response)하는 것이다.

### Connectionless & Stateless
Connectless와 Stateless는 HTTP 프로토콜의 가장 큰 특징이다. 

HTTP는 불특정 다수의 통신 환경을 기반으로, 보다 많은 연결을 위해 비연결 지향으로 설계되었다. 따라서 **Connectless**는 클라이언트가 서버에 요청을 넣고, 그에 대한 응답을 받으면 서버와의 연결을 끊는 것이다. 

**Stateless**는 Connectless로 인해 발생하는 특징이라고 할 수 있다. 응답을 받은 후 연결을 끊기 때문에, 클라이언트의 이전 상태를 알 수 없게된다. 즉, 통신할 때마다 클라이언트는 자신이 누군지 매번 인증해야하는 단점이 생긴다.

이 문제점을 해결하기 위해 **쿠키**를 사용하는 것이다.

## 쿠키 (Cookie)
현재 정보를 지속적으로 유지하기 위해 **쿠키**를 사용한다. 이 쿠키는 웹 브라우저가 보관하고 있는 데이터로, 웹 서버에 Request를 보낼 때 함께 전송된다. 쿠키에는 이름, 값, 만료 날짜, 경로 정보가 포함되어있다. 

**쿠키 프로세스**
```
1. 브라우저에서 웹페이지 접속
2. 클라이언트에서 Response를 받으며 쿠키를 로컬에 저장
3. 클라이언트에서 재요청 시 Request와 함께 쿠키 값도 전송
```

이를 통해 한 번의 로그인으로 유효 시간 동안 웹페이지의 회원 권한을 소유하고 있는 것이다.

또한, 사용자가 따로 요청하지 않아고 브라우저가 Request 시에 Header에 넣어 자동으로 서버에 전송한다.

## 세션 (Session)

**세션**은 쿠키와 유사하지만, 클라이언트 로컬에 저장하는 쿠키와 달리, 서버 측에서 관리한다. 

서버에서는 각각의 클라이언트를 구분하기 위해서 세션 ID를 부여한다. 세션 ID는 웹 브라우저가 서버에 접속한 후 끊어질 때까지 인증 상태를 유지한다. 

세션은 서버 측에서 관리하기 때문에 쿠키보다 보안성이 좋지만, 사용자가 증가하면 서버 메모리를 많이 차지하게 되어 성능을 저하시킨다. 

**세션 프로세스**
```
1. 서버에 접속한 클라이언트에 고유 ID 부여
2. 클라이언트는 ID를 쿠키에 저장
3. 클라이언트가 다시 서버에 접속 시 쿠키에 ID 값을 담아 전달
```

쿠키와 다르게 서버에 저장하는 데이터가 있기때문에 로그인 같은 보안상 중요한 작업을 수행할 때 세션을 사용한다.

#### 참고 페이지
- https://message0412.tistory.com/entry/HTTP-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B01
- https://jeong-pro.tistory.com/80
- https://interconnection.tistory.com/74